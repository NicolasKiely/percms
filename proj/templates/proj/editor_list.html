{% extends "common/base.html" %}
{% load core %}
{% load staticfiles %}
{# List entries of projects for editting #}

{% block html_head %}
  {# Validator scripts #}
  {% if validators %}
  <script src="{% static 'common/form_validator.js' %}"></script>
  {% for js_validator in validators %}
    <script src="{% static js_validator %}"></script>
  {% endfor %}
  {% endif %}
{% endblock %}

{% block html_body %}
  {% open_box %}
    <h2>Add Project</h2>

    {# Form for adding new docpages #}
    <form id="form_add_new" class="form-horizontal" role="form"
        action="{% url 'project:add_page' %}" method="post"
    >{% csrf_token %}
      <div class="form-group">
        {# Category field #}
        <label class="col-sm-3 control-label">Category</label>
        <div class="col-sm-8">
          <input class="form-control" type="text" id="add_cat" name="category">
        </div>

        {# Title field #}
        <label class="col-sm-3 control-label">Title</label>
        <div class="col-sm-8">
          <input class="form-control" type="text" id="add_title" name="title">
        </div>
      </div>

      <button type="submit" class="btn btn-primary pull-right">Add New</button>
    </form>
  {% close_box %}


  {% open_box %}
    <h2>Projects</h2>
    {# Lists entries #}

    <table class="table table-striped">
      {# Header #}
      <tr>
        <th>Project Name</th>
        <th>Date Published</th>
        <th>URL</th>
      </tr>
      {% for project in projects %}
      <tr>
        <td>{{ project.category }} : {{ project.title }}</td>
        <td>{{ project.dt_published }}</td>
        <td>
          <a href="{% url 'proj:editor_page' project.id %}">Edit Project</a> |
          <a
              href="{% url 'proj:view_page' proj.id %}{{ proj.get_normalized_name }}"
          >View Project</a>
        </td>
      </tr>
      {% endfor %}
    </table>

  {% close_box %}
{% endblock %}
